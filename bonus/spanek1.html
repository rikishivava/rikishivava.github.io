<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- OG -->
  <meta property="og:title" content="Technika pro regeneraÄnÃ­ spÃ¡nek" />
  <meta property="og:description" content="ZÃ¡kladnÃ­ technika prÃ¡ce s hypnagogickÃ½m stavem. Dech, uvolnÄ›nÃ­, pÅ™epnutÃ­ kontroly tÄ›la. VÄetnÄ› audio nahrÃ¡vek ke staÅ¾enÃ­." />
  <meta property="og:image" content="https://rikishivava.org/assets/spanek1.PNG" />
  <meta property="og:url" content="https://rikishivava.org/bonus/spanek1.html" />
  <meta property="og:type" content="article" />
  <title>Technika pro regeneraÄnÃ­ spÃ¡nek | rikishivava.org</title>

  <link rel="stylesheet" href="/style.css" />

  <style>
    /* OvlÃ¡dÃ¡nÃ­ ÄtenÃ­ â€“ nad textovÃ½m blokem vpravo */
    .reader-toolbar{
      display:flex;
      justify-content:flex-end;
      align-items:center;
      gap:8px;
      margin:8px 0 6px 0;
      position:relative;
      z-index:3;
    }
    .tts-button{
      font-size:14px;
      padding:4px 10px;
      border:1px solid #bbb;
      border-radius:6px;
      background:#eee;
      cursor:pointer;
      line-height:1.2;
      color:#222;
      user-select:none;
    }
    .tts-button[aria-busy="true"]{ opacity:0.8; cursor:progress; }
    .tts-button:hover{ background:#e5e5e5; }
    .tts-button:active{ transform: translateY(1px); }
  </style>
</head>
<body>

<!-- HornÃ­ liÅ¡ta -->
<div class="topbar">
  <div class="left-group">
    <button class="menu-button" onclick="toggleSidebar()">â˜°</button>
    <a href="/" class="logo">
      <img src="/assets/logoa.png" alt="rikishivava.org logo" class="logo-img" />
    </a>
  </div>
  <div class="language-switch">
    <a href="/dev/bonus/spanek1.html" title="ÄŒeÅ¡tina">ğŸ‡¨ğŸ‡¿</a>
    <a href="/dev/bonus/spanek1_en.html" title="English">ğŸ‡¬ğŸ‡§</a>
    <a href="/dev/bonus/spanek1_th.html" title="à¹„à¸—à¸¢">ğŸ‡¹ğŸ‡­</a>
  </div>
</div>

<!-- LevÃ© menu -->
<div id="overlay" class="overlay" onclick="closeSidebar()"></div>
<div id="sidebar" class="sidebar">
  <div class="sidebar-inner">
    <nav>
      <div class="menu-divider"></div>
      <div class="menu-item expandable open">
        <a href="#" class="menu-link active">Harmonizace</a>
      </div>
      <div class="menu-divider"></div>
      <div class="menu-item expandable open">
        <a href="#" class="menu-link active">ZboÅ¾Å¡tÄ›nÃ­</a>
        <div class="submenu">
          <a href="/dev/zbozsteni_uvod.html" class="submenu-link">Ãšvod</a>
          <a href="/dev/zbozsteni_buh.html" class="submenu-link">Co je BÅ¯h</a>
          <a href="/dev/zbozsteni_nova_esej.html" class="submenu-link active">NÃ¡zev novÃ© eseje</a>
        </div>
      </div>
      <div class="menu-divider"></div>
      <a href="/dev/texty.html">Texty</a>
      <div class="menu-divider"></div>
      <a href="/dev/kontakt.html">Kontakt</a>
      <div class="menu-divider"></div>
    </nav>
  </div>
</div>

<!-- Dekorace a obsah -->
<div class="main-container">
  <div class="wrapper">

    <!-- Zen linky -->
    <div class="zen-corner top-horizontal">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 10" preserveAspectRatio="none">
        <path d="M0,5 C20,6 60,4 80,5" stroke="#c00" stroke-width="0.5" fill="none"
              stroke-linecap="round" stroke-opacity="0.4" />
      </svg>
    </div>
    <div class="zen-corner left-vertical">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 80" preserveAspectRatio="none">
        <path d="M5,0 C4,20 6,60 5,80" stroke="#c00" stroke-width="0.5" fill="none"
              stroke-linecap="round" stroke-opacity="0.4" />
      </svg>
    </div>
    <div class="zen-corner right-vertical">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 80" preserveAspectRatio="none">
        <path d="M5,0 C4,20 6,60 5,80" stroke="#c00" stroke-width="0.5" fill="none"
              stroke-linecap="round" stroke-opacity="0.4" />
      </svg>
    </div>
    <div class="zen-corner bottom-horizontal">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 10" preserveAspectRatio="none">
        <path d="M0,5 C20,6 60,4 80,5" stroke="#c00" stroke-width="0.5" fill="none"
              stroke-linecap="round" stroke-opacity="0.4" />
      </svg>
    </div>

    <!-- OvlÃ¡dÃ¡nÃ­ ÄtenÃ­ nahlas -->
    <div class="reader-toolbar">
      <button id="tts-btn" class="tts-button" onclick="speakOrStop()" aria-busy="false">ğŸ”Š ÄŒÃ­st</button>
    </div>


    <!-- ğŸ”§ ZDE VLOÅ½ TEXT ESEJE -->
    <div class="text-block" id="text-block">

       <h1>Technika navozenÃ­ regeneraÄnÃ­ho spÃ¡nku</h1>
      <p></p>
      

<p>Regenerace bÄ›hem spÃ¡nku je klÃ­ÄovÃ½ proces, pÅ™i kterÃ©m se obnovuje nervovÃ½ systÃ©m, uvolÅˆuje svalovÃ© napÄ›tÃ­, stabilizuje hormonÃ¡lnÃ­ rovnovÃ¡ha a mozek prÅ¯bÄ›Å¾nÄ› reorganizuje mentÃ¡lnÃ­ i emoÄnÃ­ zÃ¡tÄ›Å¾. KromÄ› toho v tÄ›le probÃ­hajÃ­ zÃ¡kladnÃ­ opravnÃ© procesy na Ãºrovni bunÄ›k. PoÅ¡kozenÃ© bunÄ›ÄnÃ© struktury jsou nahrazovÃ¡ny novÃ½mi, buÅˆky intenzivnÄ› doplÅˆujÃ­ energii ve formÄ› <strong>ATP</strong> (adenosintrifosfÃ¡t, skladovÃ¡nÃ­ a pÅ™enos energie v buÅˆkÃ¡ch), zrychluje se tvorba bÃ­lkovin potÅ™ebnÃ½ch pro opravy tkÃ¡nÃ­ a aktivujÃ­ se regeneraÄnÃ­ mechanismy imunitnÃ­ho systÃ©mu. JÃ¡tra, svaly i srdce bÄ›hem noci obnovujÃ­ svÃ© zÃ¡soby Å¾ivin a tÄ›lo efektivnÄ›ji neutralizuje a odstraÅˆuje odpadnÃ­ lÃ¡tky vzniklÃ© bÄ›hem dne. V mozku se aktivuje tzv. <em>glymfatickÃ½ systÃ©m</em>, kterÃ½ pomÃ¡hÃ¡ vyplavovat metabolickÃ© zbytky a toxickÃ© produkty nervovÃ© Äinnosti. HlavnÃ­m pÅ™edpokladem kvalitnÃ­ regenerace je klidnÃ½ a plynulÃ½ pÅ™echod z bdÄ›lÃ©ho stavu do spÃ¡nkovÃ© fÃ¡ze, protoÅ¾e prÃ¡vÄ› tehdy mÅ¯Å¾e tÄ›lo tento program spustit naplno.</p>

<p>SouÄÃ¡stÃ­ noÄnÃ­ regenerace je takÃ© <strong>snÄ›nÃ­</strong>, kterÃ© je dÅ¯leÅ¾itou fÃ¡zÃ­ zpracovÃ¡nÃ­ mentÃ¡lnÃ­ a emoÄnÃ­ zÃ¡tÄ›Å¾e. Ve spÃ¡nkovÃ© fÃ¡zi REM mozek aktivnÄ› tÅ™Ã­dÃ­ informace z celÃ©ho dne, propojuje je se starÅ¡Ã­mi zkuÅ¡enostmi a uklÃ¡dÃ¡ do dlouhodobÃ© pamÄ›ti ty, kterÃ© majÃ­ vÃ½znam. Sny umoÅ¾ÅˆujÃ­ bezpeÄnÄ› â€naneÄistoâ€œ projÃ­t situacemi, emocemi i konflikty, kterÃ© v bdÄ›lÃ©m stavu Äasto nemÃ¡me prostor zpracovat. PrÃ¡vÄ› dÃ­ky snÄ›nÃ­ se postupnÄ› vyrovnÃ¡vajÃ­ emoÄnÃ­ otisky, sniÅ¾uje se vnitÅ™nÃ­ napÄ›tÃ­ a psychika se rÃ¡no probouzÃ­ jasnÄ›jÅ¡Ã­ a odolnÄ›jÅ¡Ã­. KvalitnÃ­ spÃ¡nek proto neznamenÃ¡ jen odpoÄinek tÄ›la, ale i tichÃ© noÄnÃ­ vylaÄovÃ¡nÃ­ vnitÅ™nÃ­ho svÄ›ta, bez kterÃ©ho by dennÃ­ rovnovÃ¡ha byla jen tÄ›Å¾ko udrÅ¾itelnÃ¡.</p>  

      <h2>HypnagogickÃ½ stav â€“ brÃ¡na do spÃ¡nku</h2>

<p>HypnagogickÃ½ stav je pÅ™echodovÃ¡ fÃ¡ze mezi bdÄ›nÃ­m a spÃ¡nkem. ObjevujÃ­ se v nÃ­ uvolnÄ›nÃ© myÅ¡lenkovÃ© proudy, pocity lehkosti nebo krÃ¡tkÃ© vjemy beztÃ­Å¾e. Mozek pÅ™echÃ¡zÃ­ z rychlÃ½ch beta vln do klidnÄ›jÅ¡Ã­ch alfa a theta frekvencÃ­. Tato fÃ¡ze je zÃ¡sadnÃ­, protoÅ¾e urÄuje kvalitu nÃ¡sledujÃ­cÃ­ho spÃ¡nku. Pokud je vstup klidnÃ½ a neruÅ¡enÃ½, spÃ¡nek se rychleji prohlubuje a regenerace je ÃºÄinnÄ›jÅ¡Ã­. PopÃ­Å¡eme si, jak hypnagogickÃ½ stav rozpoznat a pracovat s nÃ­m.</p>

<h2>O kvalitÄ› spÃ¡nku rozhodujeme uÅ¾ z rÃ¡na</h2>

<p>NastavenÃ­ tÄ›la na noÄnÃ­ regeneraci zaÄÃ­nÃ¡ dÃ¡vno pÅ™ed ulehnutÃ­m. VÄ›domÃ© hospodaÅ™enÃ­ s energiÃ­ bÄ›hem dne, pravidelnÃ½ pohyb, kvalitnÃ­ strava a schopnost dÄ›lat vÄ›domÃ© pauzy majÃ­ zÃ¡sadnÃ­ vliv na to, jak veÄer usÃ­nÃ¡me. PomÃ¡hÃ¡ takÃ© jasnÃ½ vnitÅ™nÃ­ Å¾ebÅ™Ã­Äek: <strong>duÅ¡evnÃ­ rovnovÃ¡ha, zdravÃ­, vÃ½kon</strong>. Tato sekvence vytvÃ¡Å™Ã­ stabilitu nervovÃ©ho systÃ©mu a sniÅ¾uje veÄernÃ­ mentÃ¡lnÃ­ pÅ™etÃ­Å¾enÃ­.</p>

<p>VeÄer nastÃ¡vÃ¡ fÃ¡ze <em>odpojovÃ¡nÃ­</em> od aktivnÃ­ho modu: ztlumenÃ­ intenzivnÃ­ho svÄ›tla, omezenÃ­ obrazovek, lehkÃ¡ hygiena, klidnÃ¡ a provÄ›tranÃ¡ mÃ­stnost, zpomalenÃ­ dechu a prostor bez pÅ™Ã­toku novÃ½ch informacÃ­, bez rozhovorÅ¯ Äi ÃºkolÅ¯. UlehnutÃ­ na mÃ­sto, kterÃ© mÃ¡me urÄenÃ© vÃ½hradnÄ› pro spÃ¡nek. SpÃ¡nek pak pÅ™ichÃ¡zÃ­ jako pÅ™irozenÃ© navÃ¡zÃ¡nÃ­ na klid.</p>

      <h2>ProÄ uÅ¾Ã­vat hoÅ™ÄÃ­k pÅ™ed spÃ¡nkem</h2>

<p>HoÅ™ÄÃ­k zklidÅˆuje nervovou soustavu, uvolÅˆuje svaly a podporuje stabilnÃ­ srdeÄnÃ­ rytmus. NejlÃ©pe pÅ¯sobÃ­ <strong>bisglycinÃ¡t hoÅ™eÄnatÃ½</strong>, kterÃ½ je Å¡etrnÃ½ k trÃ¡venÃ­ a mÃ¡ vysokou vstÅ™ebatelnost. DoporuÄenÃ¡ dÃ¡vka je <strong>70â€“140 mg elementÃ¡rnÃ­ho hoÅ™ÄÃ­ku</strong> 30â€“45 minut pÅ™ed ulehnutÃ­m, ideÃ¡lnÄ› s teplou vodou nebo bylinkovÃ½m Äajem (napÅ™. meduÅˆka, muÄenka).</p>

<h2>Melodie jako opora pÅ™echodu</h2>

<p>Pod textem pÅ™iloÅ¾enÃ¡ zvukovÃ¡ nahrÃ¡vka je navrÅ¾ena tak, aby odpovÃ­dala frekvenci <em>theta vln (4â€“8 Hz)</em>, kterÃ© doprovÃ¡zejÃ­ pÅ™echod do spÃ¡nku.</p>

<p>DÃ¡vÃ¡m k dispozici dvÄ› verze:</p>

<p><strong>1. Melodii s prÅ¯vodnÃ­m hlasem</strong> â€“ vhodnou pro prvnÃ­ dny aÅ¾ tÃ½dny, kdy si tÄ›lo i mysl teprve zvykajÃ­ na postup uvolnÄ›nÃ­ a vedenÃ½ vstup do hypnagogickÃ©ho stavu.</p>

<p><strong>2. Melodii bez hlasu</strong> â€“ pro pozdÄ›jÅ¡Ã­ fÃ¡zi, kdy je technika nauÄenÃ¡ a tÄ›lo reaguje samo. Tato verze neruÅ¡Ã­ Å¾Ã¡dnou verbÃ¡lnÃ­ informacÃ­ a nechÃ¡vÃ¡ prostor pÅ™irozenÃ©mu usnutÃ­.</p>

<p>Melodii <strong>nepouÅ¾Ã­vÃ¡me ve sluchÃ¡tkÃ¡ch</strong>. MÃ¡ znÃ­t volnÄ› v mÃ­stnosti, tiÅ¡e a nevtÃ­ravÄ›. StaÄÃ­ mobilnÃ­ reproduktor nebo domÃ¡cÃ­ audio sestava.</p>

      <h2>Postup techniky</h2>

<p><strong>1.</strong> Ulehni na zÃ¡da, ruce volnÄ› podÃ©l tÄ›la, dlanÄ› vzhÅ¯ru. MÃ­stnost je ztlumenÃ¡ a klidnÃ¡.</p>

<p><strong>2.</strong> SpusÅ¥ melodii (tiÅ¡e, jako kulisu, ne jako hlavnÃ­ zdroj pozornosti).</p>

<p><strong>3.</strong> ProveÄ krÃ¡tkou uvolÅˆovacÃ­ rutinu a nech dech zpomalit: Nadechuj se nosem, vÃ½dech nech o nÄ›co delÅ¡Ã­ neÅ¾ nÃ¡dech, zhruba v rytmu <strong>4 sekundy nÃ¡dech, 6 sekund vÃ½dech</strong>, ale bez tlaku na pÅ™esnost, spÃ­Å¡ jako jemnÃ© zpomalenÃ­. S kaÅ¾dÃ½m vÃ½dechem nech tÄ›lo o nÄ›co vÃ­ce klesnout. ZÃ¡roveÅˆ proveÄ rychlÃ½ tÄ›lovÃ½ scan: zaÄni u Äela a obliÄeje, uvolni Äelist, Å¡Ã­ji, ramena, hrudnÃ­k, bÅ™icho, paÅ¾e, dlanÄ›, boky, stehna, lÃ½tka aÅ¾ k chodidlÅ¯m. KaÅ¾dou oblast jen nech ztÄ›Å¾knout a povolit, bez soustÅ™edÄ›nÃ©ho pÅ™emÃ½Å¡lenÃ­, spÃ­Å¡ jako postupnÃ© <em>rozpouÅ¡tÄ›nÃ­ napÄ›tÃ­ v podloÅ¾ce</em>.</p>

<p><strong>4.</strong> VnÃ­mej, jak tÄ›lo tÄ›Å¾kne a zapouÅ¡tÃ­ se do podloÅ¾ky.</p>

<p><strong>5.</strong> Nech pozornost volnÄ› plynout, bez snahy usnout.</p>

<p><strong>6.</strong> Jakmile se objevÃ­ pocit vznÃ¡Å¡enÃ­, propadu nebo rozostÅ™enÃ­ hranic tÄ›la, hypnagogickÃ½ stav je aktivnÃ­.</p>

      <h2>MoÅ¾nÃ© odchylky a jak s nimi pracovat</h2>

<h3>Pocit â€nepÅ™irozenostiâ€œ pÅ™i usÃ­nÃ¡nÃ­ na zÃ¡dech</h3>
<p>Mnoho lidÃ­ dokÃ¡Å¾e na zÃ¡dech projÃ­t uvolnÄ›nÃ­m a hypnagogiÃ­, ale samotnÃ© usnutÃ­ je pro nÄ› v tÃ©to poloze nepÅ™irozenÃ©. To je normÃ¡lnÃ­ reakce tÄ›la. PomÃ¡hÃ¡ si pÅ™edstavit jednoduchou metaforu:</p>

<p><em>Na zÃ¡dech otevÃ­rÃ¡me dveÅ™e spÃ¡nku, na boku jimi vchÃ¡zÃ­me.</em></p>

<p>Postup je tedy takovÃ½:<br>
<strong>ZÃ¡da =</strong> vÄ›domÃ½ vstup, uvolnÄ›nÃ­, otevÅ™enÃ­ brÃ¡ny<br>
<strong>Bok =</strong> pÅ™irozenÃ© usnutÃ­, vypnutÃ­ kontroly, ponoÅ™enÃ­
</p>

<p>Jakmile pÅ™ijde jemnÃ½ vnitÅ™nÃ­ signÃ¡l â€teÄ uÅ¾ je to moc Å™Ã­zenÃ©â€œ nebo â€tato poloha nenÃ­ ÃºplnÄ› to pravÃ©â€œ, tÄ›lo je pÅ™ipraveno. V tu chvÃ­li se bez pÅ™emÃ½Å¡lenÃ­ pÅ™etoÄ na bok a nech spÃ¡nek pÅ™evzÃ­t Å™Ã­zenÃ­.</p>

<h3>PotÅ™eba sledovat dech nebo proces</h3>
<p>V prvnÃ­ch dnech je bÄ›Å¾nÃ© mÃ­t tendenci vÄ›ci kontrolovat. PostupnÄ› se tato potÅ™eba sama rozpustÃ­. PomÃ¡hÃ¡ vÄ›ta:</p>
<p><em>JÃ¡ pÅ™ipravuji podmÃ­nky. Moje tÄ›lo usÃ­nÃ¡ samo.</em></p>

<h3>Hlas v nahrÃ¡vce zaÄne ruÅ¡it</h3>
<p>To je znak sprÃ¡vnÃ©ho uÄenÃ­. Hlas mÄ›l roli navigace na zaÄÃ¡tku. Jakmile proces probÃ­hÃ¡ automaticky, pÅ™echod na verzi bez hlasu je logickÃ½, Å¾Ã¡doucÃ­ a podporuje hlubÅ¡Ã­ klid.</p>

<h3>PoznÃ¡mky k poloze ve spÃ¡nku</h3>
<p><strong>LevÃ¡ strana</strong> mÅ¯Å¾e podpoÅ™it trÃ¡venÃ­ a lymfatickÃ½ obÄ›h.<br>
<strong>PravÃ¡ strana</strong> mÅ¯Å¾e bÃ½t pÅ™Ã­jemnÄ›jÅ¡Ã­ pro klidnÃ© dÃ½chÃ¡nÃ­ a stabilnÃ­ srdeÄnÃ­ rytmus.<br>
TÄ›lo si v prÅ¯bÄ›hu noci polohu Äasto samo stÅ™Ã­dÃ¡, coÅ¾ je pÅ™irozenÃ½ jev.</p>

<p>Tato technika nekontroluje spÃ¡nek, ale pomÃ¡hÃ¡ k vytvoÅ™enÃ­ (pÅ™esnÄ›ji ke znovuvytvoÅ™enÃ­) bezpeÄnÃ½ch a jasnÃ½ch podmÃ­nek pro jeho pÅ™Ã­chod. KdyÅ¾ je vstupnÃ­ brÃ¡na otevÅ™enÃ¡, tÄ›lo uÅ¾ znÃ¡ cestu. StaÄÃ­ nepÅ™ekÃ¡Å¾et.</p>

      <h2>ZvukovÃ© nahrÃ¡vky ke staÅ¾enÃ­</h2>

<p><a href="/assets/meditsleep3.m4a" download>StÃ¡hnout â€” Melodie s prÅ¯vodnÃ­m komentÃ¡Å™em</a></p>

<p><a href="/assets/meditsleeppure.m4a" download>StÃ¡hnout â€” Melodie bez komentÃ¡Å™e</a></p>
    </div>

  </div>
</div>

<!-- PatiÄka -->
<footer>
  &copy; 2025 rikishivava.org Â· <strong>vÃ½vojovÃ¡ verze</strong>
</footer>

<!-- SkrytÃ½ audio prvek pro VoiceRSS fallback -->
<audio id="tts-audio" preload="none"></audio>

<!-- [SCRIPT] NahraÄ jen TTS ÄÃ¡st tak, aby mÄ›la prioritu VoiceRSS a Web Speech byla fallback: -->
<script>
  // --- TTS logika: VoiceRSS (priorita) -> Web Speech (fallback) ---
  const VOICE_RSS_KEY = 'be55c98280ea426f8bd8e5b471651642'; // ponech tvÅ¯j klÃ­Ä
  const ttsBtn = document.getElementById('tts-btn');
  const audioEl = document.getElementById('tts-audio');
  let isReading = false;
  let wsQueue = [];
  let wsCancelled = false;

  function speakOrStop(){
    if (isReading) { stopReading(); return; }
    startReading();
  }

  function startReading(){
    const text = (document.getElementById('text-block')?.innerText || '').trim();
    if (!text) return;
    isReading = true;
    setBtnState('â¹ Stop', true);

    // PRIORITA: VoiceRSS, pÅ™i chybÄ› fallback na Web Speech
    tryVoiceRSS(text).catch(() => {
      if ('speechSynthesis' in window) tryWebSpeech(text);
      else finishReading();
    });
  }

  function stopReading(){
    if ('speechSynthesis' in window) { wsCancelled = true; window.speechSynthesis.cancel(); }
    audioEl.pause(); audioEl.currentTime = 0;
    isReading = false;
    setBtnState('ğŸ”Š ÄŒÃ­st', false);
  }

  function setBtnState(label, busy){
    ttsBtn.textContent = label;
    ttsBtn.setAttribute('aria-busy', busy ? 'true' : 'false');
  }

  // --- VoiceRSS (PRIORITA) ---
  async function tryVoiceRSS(text){
    if (!VOICE_RSS_KEY) throw new Error('VOICE_RSS_KEY missing');

    setBtnState('â³ PÅ™ipravujiâ€¦', true);
    const params = new URLSearchParams({
      key: VOICE_RSS_KEY,
      hl: 'cs-cz',
      v: 'Josef',
      c: 'MP3',
      f: '16khz_16bit_stereo',
      src: text
    });

    const res = await fetch('https://api.voicerss.org/', { method: 'POST', body: params });
    const blob = await res.blob();
    if (!blob.type.startsWith('audio')) throw new Error('VoiceRSS non-audio');

    audioEl.src = URL.createObjectURL(blob);
    audioEl.onended = () => finishReading();

    // mÅ¯Å¾e selhat kvÅ¯li autoplay politice â€“ v tom pÅ™Ã­padÄ› vyhodÃ­me chybu a spadne to do fallbacku
    await audioEl.play().catch(() => { throw new Error('autoplay blocked'); });
    setBtnState('â¹ Stop', true);
  }

  // --- Web Speech (FALLBACK) ---
  function splitToSentences(text, maxLen=1400){
    const raw = text.replace(/\s+/g,' ').trim();
    const parts = raw.split(/(?<=[\.\?\!])\s+/);
    const out = [];
    let buf = '';
    for (const p of parts){
      if ((buf + ' ' + p).trim().length <= maxLen){ buf = (buf ? buf + ' ' : '') + p; }
      else { if (buf) out.push(buf); buf = p; }
    }
    if (buf) out.push(buf);
    return out;
  }

  function pickCzechVoice(){
    const voices = window.speechSynthesis.getVoices();
    return voices.find(v => v.lang?.toLowerCase().startsWith('cs') && /male|pavel|josef|microsoft|google|cz/i.test(v.name))
        || voices.find(v => v.lang?.toLowerCase().startsWith('cs'))
        || null;
  }

  async function tryWebSpeech(text){
    const synth = window.speechSynthesis;
    wsCancelled = false;

    let voice = pickCzechVoice();
    if (!voice){ await new Promise(r => setTimeout(r, 250)); voice = pickCzechVoice(); }

    wsQueue = splitToSentences(text, 1400);
    if (wsQueue.length === 0){ finishReading(); return; }

    const speakNext = ()=>{
      if (wsCancelled || wsQueue.length === 0){ finishReading(); return; }
      const chunk = wsQueue.shift();
      const ut = new SpeechSynthesisUtterance(chunk);
      ut.lang = 'cs-CZ';
      if (voice) ut.voice = voice;
      ut.onend = ()=> speakNext();
      ut.onerror = ()=> speakNext();
      synth.speak(ut);
    };

    // nastartuj sekvenci
    const test = new SpeechSynthesisUtterance(' ');
    test.onend = ()=>{ speakNext(); };
    synth.cancel(); synth.speak(test);
  }

  function finishReading(){
    isReading = false;
    setBtnState('ğŸ”Š ÄŒÃ­st', false);
  }
</script>
</body>
</html>
